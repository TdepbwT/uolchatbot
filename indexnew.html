<!DOCTYPE html>
<html>

<head>
    <style>
		body {
            /* Set the background image for the entire webpage */
            background-image: url('imgs/uolbg.png'); /* Add your background image URL here */
            background-size: cover; /* Cover the entire viewport */
            background-position: center; /* Center the background image */
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
            font-family: Verdana, sans-serif; /* Specify default font */
        }
	
        #chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            cursor: pointer;
            width: 100px;
            /* Adjust as needed */
            height: 100px;
            /* Adjust as needed */
        }

        #chat-window {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 400px;
            height: 500px;
            border: 3px solid black;
            padding: 10px;
            display: none;
            /* Start with the chat window hidden */
            overflow: hidden;
            /* Hide scrollbar */
            background-color: white;
            border-radius: 10px;
        }

        #chat-close {
            position: absolute;
            top: 0;
            right: 0;
            cursor: pointer;
            width: 15px;
            height: 15px;
            padding: 10px;
        }

        #chat-messages {
            width: 100%;
            overflow-y: auto;
            /* Scrollbar only on the right */
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding-right: 10px; /* Add padding to create space for scrollbar */
        }

        #chat-input {
            width: 100%;
            font-size: 16px;
            height: 25px;
            border: 3px solid black;
            padding: 5px;
            margin: 5px 0;
            font-family: Verdana, sans-serif;
        }

        #chat-title-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid black;
        }

        #chat-input-container {
            /* This only exists so the bar at the bottom actually centers itself */
            display: flex;
            justify-content: center;
        }

        #chat-title {
            text-align: center;
            font-weight: bold;
            font-family: Verdana, sans-serif;
            flex-grow: 1;
        }

        .user-message-container {
            display: flex;
            flex-direction: column;
            align-items: flex-end; /* Align user messages to the right */
            width: 100%;
        }

        .user-message {
            background-color: #047e8b;
            /* Change the background color */
            border-radius: 12px;
            /* Round the corners */
            padding: 8px;
            /* Add some padding */
            margin: 3px 0;
            /* Add some margin */
            width: fit-content;
            /* Make the width fit the content */
            max-width: 80%;
            /* Limit the maximum width */
            border: 1px solid #ccc;
            font-family: Verdana, sans-serif;
			color: white;
        }

        .robot-message-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align bot messages to the left */
            width: 100%;
        }

        .robot-message {
            background-color: #002147;
            /* Light green with slight alpha */
            border-radius: 12px;
            /* Round the corners */
            padding: 8px;
            /* Add some padding */
            margin: 3px 0;
            /* Add some margin */
            width: fit-content;
            /* Make the width fit the content */
            max-width: 80%;
            /* Limit the maximum width */
            border: 1px solid #ccc;
            font-family: Verdana, sans-serif;
			color: white;
        }

        .message-name {
            font-family: Verdana, sans-serif;
            /* Change the font */
            font-weight: normal;
            /* Make it not bold */
            font-size: 0.8em;
            /* Make it smaller */
            font-style: italic;
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <input type="text" id="robot-input">
    <button id="robot-send-button" onclick="sendRobotMessageFromInput()">Send Robot Message</button>
    <img id="chat-icon" src="imgs/chaticon.png" alt="Chat Icon" onclick="openChat()">

    <div id="chat-window">
        <div id="chat-title-bar">
            <div id="chat-title">University of Lincoln Chatbot</div>
            <img id="chat-close" src="imgs/close.png" alt="Close Chat" onclick="closeChat()">
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" onkeydown="checkForEnter(event)" placeholder="Enter message here...">
			<button id="send-button" onclick="sendUserMessage()">Send</button>
        </div>
    </div>

    </div>

    <script>
        function sendRobotMessageFromInput() {
            // Get the robot input field
            var input = document.getElementById('robot-input');

            // Send the robot message
            sendMessage(input.value, true);

            // Clear the input field
            input.value = '';
        }
        function openChat() {
            document.getElementById('chat-icon').style.display = 'none';
            var chatWindow = document.getElementById('chat-window');
            chatWindow.style.display = 'flex';
            chatWindow.style.flexDirection = 'column';
            chatWindow.style.justifyContent = 'space-between';
        }

        function closeChat() {
            var chatWindow = document.getElementById('chat-window');
            chatWindow.style.display = '';
            chatWindow.style.flexDirection = '';
            chatWindow.style.justifyContent = '';
            chatWindow.style.display = 'none';
            document.getElementById('chat-icon').style.display = 'block';
        }

        function checkForEnter(event) {
            // Check if the Enter key was pressed and if the input field is not empty
            if (event.key === 'Enter' && event.target.value.trim() !== '') {
                // Prevent the default action to stop the form from being submitted
                event.preventDefault();

                // Send the message
                sendMessage(event.target.value.trim(), false);

                // Clear the input field
                event.target.value = '';
            }
        }
		
		function sendUserMessage() {
			// Get the input field element where the user types the message
			var input = document.getElementById('chat-input');
			// Get the trimmed text content of the input field (remove leading/trailing spaces)
			var messageText = input.value.trim();
			
			if (messageText !== '') {
				// Call the sendMessage function to display the message in the chat window
				sendMessage(messageText, false);
				// Clear the input field after sending the message
				input.value = ''; 
			}
		}
		
        function sendMessage(messageText, isRobot) {
            // Get the chat messages div
            var messages = document.getElementById('chat-messages');

            // Create a new div for the message container
            var messageContainer = document.createElement('div');
            messageContainer.className = isRobot ? 'robot-message-container' : 'user-message-container';

            // Create a new div for the name
            var name = document.createElement('div');
            name.textContent = isRobot ? 'UoL Chatbot:' : 'User:';
            name.className = 'message-name';

            // Create a new div for the message
            var message = document.createElement('div');
            message.textContent = messageText;
            message.className = isRobot ? 'robot-message' : 'user-message';

            // Add the name and message to the message container
            messageContainer.appendChild(name);
            messageContainer.appendChild(message);

            // Add the message container to the chat messages
            messages.appendChild(messageContainer);

            // Scroll to the bottom of the chat messages
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
</body>

</html>